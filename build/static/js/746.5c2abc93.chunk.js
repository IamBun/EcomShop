"use strict";(self.webpackChunkmyapp=self.webpackChunkmyapp||[]).push([[746],{6746:function(t,e,n){n.r(e),n.d(e,{default:function(){return C}});var r=n(4165),i=n(5861),c=n(885),s="detailProduct_detailProduct__vuDHp",a="detailProduct_miniImg__K+WaB",o="detailProduct_imgMain__kwYkU",l="detailProduct_detailDescription__5HmUk",d="detailProduct_middle__ci9fs",u="detailProduct_bottom__4UEVi",h="detailProduct_description__se8Q2",m="detailProduct_products__N4Qyh",p="detailProduct_formButton__JKjgk",g="detailProduct_backToShopBtn__ZoIjw",f=n(9434),v=n(948),x=n(5217),j=n(7689),_=n(5431),y=n(2791),k=n(8174),P=(n(5462),n(184)),b=function(t){var e=(0,f.v9)((function(t){return t.data.currentData})),n=(0,f.v9)((function(t){return t.currentUser.name})),b=(0,f.v9)((function(t){return t.currentUser.userId})),C=(0,f.v9)((function(t){return t.currentUser.token})),N=((0,f.v9)((function(t){return t.cart})),(0,y.useState)()),O=(0,c.Z)(N,2),U=O[0],I=O[1],D=(0,y.useState)(1),T=(0,c.Z)(D,2),w=T[0],S=T[1],A=(0,j.UO)(),Z=(0,j.s0)(),B=(0,f.I0)(),E=(0,y.useRef)(),R=(0,y.useCallback)(e.filter((function(t){return t.category===(null===U||void 0===U?void 0:U.category)&&t._id!==(null===U||void 0===U?void 0:U._id)})),[U]);(0,y.useEffect)((function(){fetch("https://shy-roan-roll.glitch.me"+"/shop/product/".concat(A.productId)).then((function(t){return t.json()})).then((function(t){I(t.product)})).catch((function(t){return console.log(t)}))}),[e,A]);var q=function(t){var e=R[t]._id;Z("/detail/".concat(e))},F=function(){var t=(0,i.Z)((0,r.Z)().mark((function t(e){var i,c;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=3;break}return k.Am.warn("Login to continue !"),t.abrupt("return",!1);case 3:if(!n){t.next=14;break}return t.next=6,fetch("https://shy-roan-roll.glitch.me"+"/shop/cart/".concat(b),{credentials:"include",method:"POST",headers:{Authorization:C,"Content-Type":"application/json"},body:JSON.stringify({productId:U._id,quantity:w})});case 6:return t.next=8,fetch("https://shy-roan-roll.glitch.me"+"/shop/cart/".concat(b),{credentials:"include",headers:{Authorization:C}});case 8:return i=t.sent,t.next=11,i.json();case 11:c=t.sent,B(_.U.changeProductQuantity({totalProduct:c.length})),k.Am.success("Added");case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return(0,P.jsxs)(P.Fragment,{children:[U&&(0,P.jsxs)("div",{children:[(0,P.jsxs)("div",{className:s,children:[(0,P.jsxs)("div",{className:a,children:[(0,P.jsx)("img",{src:"https://shy-roan-roll.glitch.me/"+(null===U||void 0===U?void 0:U.image[0]),alt:"image0"}),(0,P.jsx)("img",{src:"https://shy-roan-roll.glitch.me/"+(null===U||void 0===U?void 0:U.image[1]),alt:"image1"}),(0,P.jsx)("img",{src:"https://shy-roan-roll.glitch.me/"+(null===U||void 0===U?void 0:U.image[2]),alt:"image2"}),(0,P.jsx)("img",{src:"https://shy-roan-roll.glitch.me/"+(null===U||void 0===U?void 0:U.image[3]),alt:"image3"})]}),(0,P.jsx)("div",{className:o,children:(0,P.jsx)("img",{src:"https://shy-roan-roll.glitch.me/"+(null===U||void 0===U?void 0:U.image[0]),alt:"image0"})}),(0,P.jsxs)("div",{className:l,children:[(0,P.jsx)("h1",{children:U.name}),(0,P.jsx)("h3",{children:(0,x.lz)(U.price)}),(0,P.jsx)("p",{children:U.short_desc}),(0,P.jsxs)("h3",{children:["Category : ",null===U||void 0===U?void 0:U.category]}),(0,P.jsxs)("div",{className:p,children:[(0,P.jsxs)("form",{children:[(0,P.jsx)("label",{htmlFor:"",for:"qty",children:"Quantity:"}),(0,P.jsx)("input",{ref:E,type:"number",name:"qty",id:"qty",min:"1",max:"10",step:"1",defaultValue:w,onChange:function(t){S(t.target.value)}})]}),(0,P.jsx)("button",{onClick:F,children:"Add to cart"})]})]})]}),"//"," ",(0,P.jsxs)("div",{className:d,children:[(0,P.jsx)("span",{children:"Description"}),(0,P.jsx)("h3",{children:"PRODUCT DESCRIPTION"}),(0,P.jsx)("p",{className:h,children:U.long_desc})]})," ",(0,P.jsxs)("div",{className:u,children:[(0,P.jsx)("h3",{children:"RELATED PRODUCTS"})," ",(0,P.jsx)("div",{className:m,children:R.length>0&&R.map((function(t,e){return(0,P.jsx)(v.Z,{item:t,click:q,index:e},e)}))})]}),(0,P.jsx)("div",{className:g,children:(0,P.jsx)("button",{onClick:function(t){t.preventDefault(),Z("/shop")},children:" Back To ShopPage"})})]}),0===e.length&&(0,P.jsx)("h1",{children:"Loading..."}),(0,P.jsx)(k.Ix,{position:"top-center",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"})]})},C=function(){var t=(0,j.UO)();return(0,P.jsx)(P.Fragment,{children:(0,P.jsx)(b,{id:t.productId})})}}}]);
//# sourceMappingURL=746.5c2abc93.chunk.js.map