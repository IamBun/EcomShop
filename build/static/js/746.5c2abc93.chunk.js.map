{"version":3,"file":"static/js/746.5c2abc93.chunk.js","mappings":"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","sources":["webpack://myapp/./src/components/detailPage/detailProduct.module.css?2501","components/detailPage/DetailProduct.js","page/DetailPage.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"detailProduct\":\"detailProduct_detailProduct__vuDHp\",\"miniImg\":\"detailProduct_miniImg__K+WaB\",\"imgMain\":\"detailProduct_imgMain__kwYkU\",\"detailDescription\":\"detailProduct_detailDescription__5HmUk\",\"middle\":\"detailProduct_middle__ci9fs\",\"bottom\":\"detailProduct_bottom__4UEVi\",\"description\":\"detailProduct_description__se8Q2\",\"products\":\"detailProduct_products__N4Qyh\",\"formButton\":\"detailProduct_formButton__JKjgk\",\"backToShopBtn\":\"detailProduct_backToShopBtn__ZoIjw\"};","import classes from \"./detailProduct.module.css\";\r\nimport { useSelector } from \"react-redux\";\r\nimport Products from \"../homePage/Products\";\r\nimport { editPrice } from \"../../store/function\";\r\nimport { json, useNavigate } from \"react-router-dom\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { cartActions } from \"../../store/cartStore\";\r\nimport { useCallback, useEffect, useRef, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\n\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nconst DetailProduct = (props) => {\r\n  const data = useSelector((state) => state.data.currentData); //lay data tu store\r\n  const userActive = useSelector((state) => state.currentUser.name); // lay user hien tai\r\n  const userId = useSelector((state) => state.currentUser.userId); // lay userId hien tai\r\n  const userToken = useSelector((state) => state.currentUser.token); // lay userId hien tai\r\n  const cart = useSelector((state) => state.cart); //lay cart tu store\r\n\r\n  const [product, setProduct] = useState();\r\n  const [quantity, setQuantity] = useState(1);\r\n\r\n  const params = useParams();\r\n  const navigate = useNavigate();\r\n  const dispatch = useDispatch();\r\n  const quantityInputRef = useRef();\r\n\r\n  const related = useCallback(\r\n    data.filter(\r\n      // loc cac san pham tuong tu category / khong lay san pham hien tai\r\n      (ele) => {\r\n        return ele.category === product?.category && ele._id !== product?._id;\r\n      }\r\n    ),\r\n    [product]\r\n  );\r\n\r\n  const fetchProduct = () => {\r\n    fetch(process.env.REACT_APP_API_URL + `/shop/product/${params.productId}`)\r\n      .then((res) => {\r\n        return res.json();\r\n      })\r\n      .then((data) => {\r\n        setProduct(data.product);\r\n      })\r\n      .catch((err) => console.log(err));\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchProduct();\r\n  }, [data, params]);\r\n\r\n  const showDetailHandler = (index) => {\r\n    //show detail san pham lien quan\r\n    const idDetail = related[index]._id;\r\n    navigate(`/detail/${idDetail}`);\r\n  };\r\n\r\n  const backToShopHandler = (e) => {\r\n    // button quay lai shop\r\n    e.preventDefault();\r\n    navigate(\"/shop\");\r\n  };\r\n\r\n  //Xu ly du lieu add to cart\r\n  const addToCartHandler = async (e) => {\r\n    if (!userActive) {\r\n      //Neu chua dang nhap thi thong bao dang nhap\r\n      toast.warn(\"Login to continue !\");\r\n      return false;\r\n    }\r\n    if (!!userActive) {\r\n      await fetch(process.env.REACT_APP_API_URL + `/shop/cart/${userId}`, {\r\n        credentials: \"include\",\r\n        method: \"POST\",\r\n        headers: {\r\n          Authorization: userToken,\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          productId: product._id,\r\n          quantity: quantity,\r\n        }),\r\n      });\r\n      const res = await fetch(\r\n        process.env.REACT_APP_API_URL + `/shop/cart/${userId}`,\r\n        {\r\n          credentials: \"include\",\r\n          headers: {\r\n            Authorization: userToken,\r\n          },\r\n        }\r\n      );\r\n      const data = await res.json();\r\n      dispatch(\r\n        cartActions.changeProductQuantity({ totalProduct: data.length })\r\n      );\r\n      toast.success(`Added`);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {product && (\r\n        <div>\r\n          <div className={classes.detailProduct}>\r\n            {/* anh mini o ben trai  */}\r\n            <div className={classes.miniImg}>\r\n              {/* {product.image.map((ele, index) => {\r\n                <img src={ele} key={index}></img>;\r\n              })} */}\r\n              <img\r\n                src={process.env.REACT_APP_API_URL + \"/\" + product?.image[0]}\r\n                alt=\"image0\"\r\n              ></img>\r\n              <img\r\n                src={process.env.REACT_APP_API_URL + \"/\" + product?.image[1]}\r\n                alt=\"image1\"\r\n              ></img>\r\n              <img\r\n                src={process.env.REACT_APP_API_URL + \"/\" + product?.image[2]}\r\n                alt=\"image2\"\r\n              ></img>\r\n              <img\r\n                src={process.env.REACT_APP_API_URL + \"/\" + product?.image[3]}\r\n                alt=\"image3\"\r\n              ></img>\r\n            </div>\r\n            {/* anh chinh o giua  */}\r\n            <div className={classes.imgMain}>\r\n              <img\r\n                src={process.env.REACT_APP_API_URL + \"/\" + product?.image[0]}\r\n                alt=\"image0\"\r\n              ></img>\r\n            </div>\r\n\r\n            {/* thanh phan hien thi mo ta san pham o ben phai */}\r\n            <div className={classes.detailDescription}>\r\n              <h1>{product.name}</h1>\r\n              <h3>{editPrice(product.price)}</h3>\r\n              <p>{product.short_desc}</p>\r\n              <h3>Category : {product?.category}</h3>\r\n              <div className={classes.formButton}>\r\n                {/* form de lay du lieu cho vao cart */}\r\n                <form>\r\n                  <label htmlFor=\"\" for=\"qty\">\r\n                    Quantity:\r\n                  </label>\r\n                  <input\r\n                    ref={quantityInputRef}\r\n                    type=\"number\"\r\n                    name=\"qty\"\r\n                    id=\"qty\"\r\n                    min=\"1\"\r\n                    max=\"10\"\r\n                    step=\"1\"\r\n                    defaultValue={quantity}\r\n                    onChange={(e) => {\r\n                      setQuantity(e.target.value);\r\n                    }}\r\n                  />\r\n                </form>\r\n                <button onClick={addToCartHandler}>Add to cart</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          {/* MIDDLE thanh phan mo ta cu the  */}\r\n          //{\" \"}\r\n          <div className={classes.middle}>\r\n            <span>Description</span>\r\n            <h3>PRODUCT DESCRIPTION</h3>\r\n            <p className={classes.description}>{product.long_desc}</p>\r\n          </div>\r\n          {/* BOTTOM gom cac san pham lien quan */}{\" \"}\r\n          <div className={classes.bottom}>\r\n            <h3>RELATED PRODUCTS</h3>{\" \"}\r\n            <div className={classes.products}>\r\n              {/* Neu co san pham lien quan thi hien thi ra man hinh  */}\r\n              {related.length > 0 &&\r\n                related.map((ele, index) => (\r\n                  <Products\r\n                    key={index}\r\n                    item={ele} //obj chua thong tin san pham\r\n                    click={showDetailHandler} //click show san pham\r\n                    index={index} //index de hien thi\r\n                  />\r\n                ))}\r\n            </div>\r\n          </div>\r\n          {/* Button de quay lai trang shop */}\r\n          <div className={classes.backToShopBtn}>\r\n            <button onClick={backToShopHandler}> Back To ShopPage</button>\r\n          </div>\r\n        </div>\r\n      )}\r\n      {/* Luc moi tai trang, Component duoc render lan dau chua co du lieu thi hien thi Loading...  */}\r\n      {data.length === 0 && <h1>Loading...</h1>}\r\n      <ToastContainer\r\n        position=\"top-center\"\r\n        autoClose={3000}\r\n        hideProgressBar={false}\r\n        newestOnTop={false}\r\n        closeOnClick\r\n        rtl={false}\r\n        pauseOnFocusLoss\r\n        draggable\r\n        pauseOnHover\r\n        theme=\"light\"\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default DetailProduct;\r\n","import DetailProduct from \"../components/detailPage/DetailProduct\";\r\nimport { useParams } from \"react-router-dom\";\r\n\r\nconst DetailPage = () => {\r\n  const params = useParams();\r\n\r\n  return (\r\n    <>\r\n      <DetailProduct id={params.productId} />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default DetailPage;\r\n"],"names":["props","data","useSelector","state","currentData","userActive","currentUser","name","userId","userToken","token","cart","useState","product","setProduct","quantity","setQuantity","params","useParams","navigate","useNavigate","dispatch","useDispatch","quantityInputRef","useRef","related","useCallback","filter","ele","category","_id","useEffect","fetch","process","productId","then","res","json","catch","err","console","log","showDetailHandler","index","idDetail","addToCartHandler","e","toast","credentials","method","headers","Authorization","body","JSON","stringify","cartActions","totalProduct","length","className","classes","src","image","alt","editPrice","price","short_desc","htmlFor","for","ref","type","id","min","max","step","defaultValue","onChange","target","value","onClick","long_desc","map","Products","item","click","preventDefault","position","autoClose","hideProgressBar","newestOnTop","closeOnClick","rtl","pauseOnFocusLoss","draggable","pauseOnHover","theme"],"sourceRoot":""}