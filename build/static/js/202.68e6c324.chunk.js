"use strict";(self.webpackChunkmyapp=self.webpackChunkmyapp||[]).push([[202],{202:function(e,t,n){n.r(t),n.d(t,{default:function(){return x}});var s=n(4165),r=n(5861),a=n(3308),o=n(1087),c=n(2791),i=n(9434),l=n(3533),u=n(7689),h="login_login__PwfxJ",p="login_form__0V1x8",d=n(8174),g=(n(5462),n(5431)),f=n(184),m=function(){var e=(0,c.useRef)(),t=(0,c.useRef)(),n=(0,i.I0)(),m=(0,u.s0)(),x=function(){var a=(0,r.Z)((0,s.Z)().mark((function r(a){var o,c,i,u,h,p,f;return(0,s.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return a.preventDefault(),o=e.current.value,c=t.current.value,s.prev=3,s.next=6,fetch("https://shy-roan-roll.glitch.me/auth/login",{credentials:"include",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o,password:c})});case 6:return i=s.sent,s.next=9,i.json();case 9:return u=s.sent,s.next=12,u.userId;case 12:if(h=s.sent){s.next=16;break}throw d.Am.error("".concat(u.message)),new Error("Login failed !");case 16:return d.Am.success("Login success !"),s.next=19,fetch("https://shy-roan-roll.glitch.me"+"/shop/cart/".concat(h),{credentials:"include",headers:{Authorization:u.token}});case 19:return p=s.sent,s.next=22,p.json();case 22:f=s.sent,console.log("cartTotal",f),n(g.U.changeProductQuantity({totalProduct:f.length})),localStorage.setItem("cartTotal",f.length),n(g.U.changeCart({cart:f})),n(l.N.login({name:u.name,token:u.token,userId:u.userId})),sessionStorage.setItem("token",u.token),sessionStorage.setItem("isUser",u.name),sessionStorage.setItem("userId",u.userId),f.length>0&&localStorage.setItem("cart",JSON.stringify(f)),m("/"),s.next=38;break;case 35:s.prev=35,s.t0=s.catch(3),console.log(s.t0);case 38:case"end":return s.stop()}}),r,null,[[3,35]])})));return function(e){return a.apply(this,arguments)}}();return(0,f.jsxs)("div",{className:h,children:[(0,f.jsx)("img",{src:a}),(0,f.jsxs)("form",{onSubmit:x,className:p,children:[(0,f.jsx)("h1",{children:"Sign In"}),(0,f.jsx)("input",{type:"text",placeholder:"Email",ref:e}),(0,f.jsx)("input",{type:"password",placeholder:"Password",ref:t}),(0,f.jsx)("button",{children:"SIGN IN"}),(0,f.jsxs)("h3",{children:["Create an account ? ",(0,f.jsx)(o.rU,{to:"/register",children:" Sign up"})]})]}),(0,f.jsx)(d.Ix,{position:"top-center",autoClose:2e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!1,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"})]})},x=function(){return(0,f.jsx)(m,{})}}}]);
//# sourceMappingURL=202.68e6c324.chunk.js.map