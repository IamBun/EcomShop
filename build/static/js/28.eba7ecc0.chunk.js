"use strict";(self.webpackChunkmyapp=self.webpackChunkmyapp||[]).push([[28],{2028:function(e,n,r){r.r(n),r.d(n,{default:function(){return g}});var t=r(4165),s=r(5861),c=r(885),a=r(3308),u="checkOut_checkOut__pPGDL",i="checkOut_checkOutBannerImg__L6Xcm",o="checkOut_bannerDescription__3iXg7",l="checkOut_checkOutSection__ZDeH8",h="checkOut_customerInformation__Xup+Y",d="checkOut_checkOutCartInfo__EU6Kr",p="checkOut_orderDetail__YJ7m+",x="checkOut_total__lkwtv",f=r(9434),v=r(5217),j=r(2791),m=(r(8249),r(7689)),k=r(5431),_=r(8174),y=(r(5462),r(184)),O=function(){var e=(0,f.v9)((function(e){return e.cart.cartChange})),n=(0,f.v9)((function(e){return e.currentUser.name})),r=(0,f.v9)((function(e){return e.currentUser.userId})),O=(0,f.v9)((function(e){return e.currentUser.token})),g=(0,j.useState)(),b=(0,c.Z)(g,2),N=b[0],E=b[1],w=(0,j.useState)(0),I=(0,c.Z)(w,2),C=I[0],D=I[1],L=(0,j.useRef)(),R=(0,j.useRef)(),Z=(0,j.useRef)(),A=(0,j.useRef)(),S=(0,f.I0)(),U=(0,m.s0)(),T=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(){var n,s,c,a,u,i,o;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://shy-roan-roll.glitch.me"+"/shop/cart/".concat(r),{credentials:"include",headers:{Authorization:O}});case 3:return n=e.sent,e.next=6,n.json();case 6:s=e.sent,c=[],a=0,u=0;case 10:if(!(u<s.length)){e.next=22;break}return e.next=13,fetch("https://shy-roan-roll.glitch.me"+"/shop/product/".concat(s[u].productId),{credentials:"include"});case 13:return i=e.sent,e.next=16,i.json();case 16:o=e.sent,c.push({product:o.product,quantity:s[u].quantity}),a+=o.product.price*s[u].quantity;case 19:u++,e.next=10;break;case 22:E(c),D(a),e.next=29;break;case 26:e.prev=26,e.t0=e.catch(0),console.log(e.t0);case 29:case"end":return e.stop()}}),e,null,[[0,26]])})));return function(){return e.apply(this,arguments)}}();(0,j.useEffect)((function(){T()}),[e]);var P=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(n){var r,s,c,a,u,i;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),r=L.current.value,s=R.current.value,c=Z.current.value,a=A.current.value,e.prev=5,e.next=8,fetch("https://shy-roan-roll.glitch.me/shop/order",{credentials:"include",method:"POST",headers:{Authorization:O,"Content-Type":"application/json"},body:JSON.stringify({name:r,email:s,phoneNumber:c,address:a,total:C})});case 8:if((u=e.sent).ok){e.next=15;break}return e.next=12,u.json();case 12:throw i=e.sent,_.Am.error("".concat(i.message)),new Error("Failed !");case 15:_.Am.success("Thank for your order ! We will contact you soon !",{}),setTimeout((function(){S(k.U.logoutCart()),U("/")}),5e3),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(5),console.log(e.t0);case 22:case"end":return e.stop()}}),e,null,[[5,19]])})));return function(n){return e.apply(this,arguments)}}();return(0,y.jsxs)("div",{className:u,children:[(0,y.jsxs)("div",{className:i,children:[(0,y.jsx)("img",{src:a}),(0,y.jsxs)("div",{className:o,children:[(0,y.jsx)("h1",{children:"Checkout Page"}),(0,y.jsx)("h3",{children:"Last Chance! Free shipping on all orders ends today ! "})]})]}),(0,y.jsxs)("div",{className:l,children:[n&&(null===N||void 0===N?void 0:N.length)>0&&(0,y.jsxs)("div",{className:h,children:[(0,y.jsx)("h2",{children:"BILLING DETAIL"}),(0,y.jsxs)("form",{onSubmit:P,children:[(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{children:"FULLNAME:"}),(0,y.jsx)("input",{placeholder:"Enter your fullname",ref:L})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{children:"EMAIL:"}),(0,y.jsx)("input",{placeholder:"Enter your email",ref:R})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{children:"PHONE NUMBER:"}),(0,y.jsx)("input",{placeholder:"Enter your phone number",ref:Z})]}),(0,y.jsxs)("div",{children:[(0,y.jsx)("label",{children:"ADDRESS:"}),(0,y.jsx)("input",{placeholder:"Enter your address ",ref:A})]}),(0,y.jsx)("button",{type:"submit",children:"Place Order"})]})]}),(0,y.jsxs)("div",{className:d,children:[(0,y.jsx)("h2",{children:"YOUR ORDER"}),null===N||void 0===N?void 0:N.map((function(e,n){return console.log(e),(0,y.jsxs)("div",{className:p,children:[(0,y.jsx)("div",{children:(0,y.jsx)("h3",{children:e.product.name})}),(0,y.jsxs)("div",{children:[(0,y.jsx)("span",{children:e.quantity}),(0,y.jsx)("span",{children:" x "}),(0,y.jsxs)("span",{children:[(0,v.lz)(e.product.price)," "]})]})]},n)})),(0,y.jsxs)("div",{className:x,children:[(0,y.jsx)("h2",{children:"Total (VND):"}),(0,y.jsxs)("h3",{children:[(0,v.lz)(C)," "]})]})]})]}),(0,y.jsx)(_.Ix,{position:"top-center",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"})]})},g=function(){return(0,y.jsx)(O,{})}}}]);
//# sourceMappingURL=28.eba7ecc0.chunk.js.map