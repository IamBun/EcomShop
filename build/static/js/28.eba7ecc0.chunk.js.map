{"version":3,"file":"static/js/28.eba7ecc0.chunk.js","mappings":"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","sources":["webpack://myapp/./src/components/checkOutPage/checkOut.module.css?b468","components/checkOutPage/CheckOut.js","page/CheckoutPage.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"checkOut\":\"checkOut_checkOut__pPGDL\",\"checkOutBannerImg\":\"checkOut_checkOutBannerImg__L6Xcm\",\"bannerDescription\":\"checkOut_bannerDescription__3iXg7\",\"checkOutSection\":\"checkOut_checkOutSection__ZDeH8\",\"customerInformation\":\"checkOut_customerInformation__Xup+Y\",\"checkOutCartInfo\":\"checkOut_checkOutCartInfo__EU6Kr\",\"orderDetail\":\"checkOut_orderDetail__YJ7m+\",\"total\":\"checkOut_total__lkwtv\"};","import img from \"../SRCIMG/banner1.jpg\";\r\nimport classes from \"./checkOut.module.css\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { editPrice, TotalPrice } from \"../../store/function\";\r\nimport { useRef, useState, useEffect } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { billActions } from \"../../store/bill\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { cartActions } from \"../../store/cartStore\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nconst CheckOut = () => {\r\n  const cartChange = useSelector((state) => state.cart.cartChange);\r\n  const isUser = useSelector((state) => state.currentUser.name);\r\n  const userId = useSelector((state) => state.currentUser.userId);\r\n  const userToken = useSelector((state) => state.currentUser.token);\r\n\r\n  const [cart, setCart] = useState();\r\n  const [total, setTotal] = useState(0);\r\n\r\n  const fullnameInputRef = useRef();\r\n  const emailInputRef = useRef();\r\n  const phoneInputRef = useRef();\r\n  const addressInputRef = useRef();\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n\r\n  const fetchCartFromBE = async () => {\r\n    try {\r\n      const res = await fetch(\r\n        process.env.REACT_APP_API_URL + `/shop/cart/${userId}`,\r\n        {\r\n          credentials: \"include\",\r\n          headers: {\r\n            Authorization: userToken,\r\n          },\r\n        }\r\n      );\r\n      const dataCart = await res.json(); // lay cart tu BE ve, la mang gom ProductId va quantity\r\n      let tempCart = [];\r\n      let tempTotal = 0;\r\n      for (let i = 0; i < dataCart.length; i++) {\r\n        const cartAndQuantity = await fetch(\r\n          process.env.REACT_APP_API_URL +\r\n            `/shop/product/${dataCart[i].productId}`,\r\n          { credentials: \"include\" }\r\n        );\r\n        const cartAndQuantityJson = await cartAndQuantity.json();\r\n        tempCart.push({\r\n          product: cartAndQuantityJson.product,\r\n          quantity: dataCart[i].quantity,\r\n        });\r\n        tempTotal += cartAndQuantityJson.product.price * dataCart[i].quantity;\r\n      }\r\n      setCart(tempCart);\r\n      setTotal(tempTotal);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchCartFromBE();\r\n  }, [cartChange]);\r\n\r\n  const submitBillingFormHandler = async (e) => {\r\n    e.preventDefault();\r\n    const enteredFullnameInputRef = fullnameInputRef.current.value;\r\n    const enteredEmailInputRef = emailInputRef.current.value;\r\n    const enteredPhoneInputRef = phoneInputRef.current.value;\r\n    const enteredAddressInputRef = addressInputRef.current.value;\r\n\r\n    try {\r\n      const res = await fetch(process.env.REACT_APP_API_URL + `/shop/order`, {\r\n        credentials: \"include\",\r\n        method: \"POST\",\r\n        headers: {\r\n          Authorization: userToken,\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          name: enteredFullnameInputRef,\r\n          email: enteredEmailInputRef,\r\n          phoneNumber: enteredPhoneInputRef,\r\n          address: enteredAddressInputRef,\r\n          total: total,\r\n        }),\r\n      });\r\n\r\n      if (!res.ok) {\r\n        const data = await res.json();\r\n        toast.error(`${data.message}`);\r\n        throw new Error(\"Failed !\");\r\n      }\r\n\r\n      toast.success(\"Thank for your order ! We will contact you soon !\", {\r\n        //thong bao\r\n        // position: \"top-center\",\r\n        // autoClose: 3000,\r\n        // hideProgressBar: false,\r\n        // closeOnClick: true,\r\n        // pauseOnHover: true,\r\n        // draggable: true,\r\n        // progress: undefined,\r\n        // theme: \"light\",\r\n      });\r\n      setTimeout(() => {\r\n        dispatch(cartActions.logoutCart()); //xoa cart\r\n        navigate(\"/\");\r\n      }, 5000);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    //gom banner o tren, bill o ben trai, detail total ben phai\r\n    <div className={classes.checkOut}>\r\n      <div className={classes.checkOutBannerImg}>\r\n        <img src={img} />\r\n        <div className={classes.bannerDescription}>\r\n          <h1>Checkout Page</h1>\r\n          <h3>Last Chance! Free shipping on all orders ends today ! </h3>\r\n        </div>\r\n      </div>\r\n      {/* section chua order information  */}\r\n      <div className={classes.checkOutSection}>\r\n        {/* thong tin khach hang o ben trai  */}\r\n        {isUser &&\r\n          cart?.length > 0 && ( //neu khach hang da dang nhap va co gio hang thi cho checkout\r\n            <div className={classes.customerInformation}>\r\n              <h2>BILLING DETAIL</h2>\r\n              <form onSubmit={submitBillingFormHandler}>\r\n                <div>\r\n                  <label>FULLNAME:</label>\r\n                  <input\r\n                    placeholder=\"Enter your fullname\"\r\n                    ref={fullnameInputRef}\r\n                  ></input>\r\n                </div>\r\n                <div>\r\n                  <label>EMAIL:</label>\r\n                  <input\r\n                    placeholder=\"Enter your email\"\r\n                    ref={emailInputRef}\r\n                  ></input>\r\n                </div>\r\n                <div>\r\n                  <label>PHONE NUMBER:</label>\r\n                  <input\r\n                    placeholder=\"Enter your phone number\"\r\n                    ref={phoneInputRef}\r\n                  ></input>\r\n                </div>\r\n                <div>\r\n                  <label>ADDRESS:</label>\r\n                  <input\r\n                    placeholder=\"Enter your address \"\r\n                    ref={addressInputRef}\r\n                  ></input>\r\n                </div>\r\n                <button type=\"submit\">Place Order</button>\r\n              </form>\r\n            </div>\r\n          )}\r\n        {/* thong tin gio hang o ben phai  */}\r\n        <div className={classes.checkOutCartInfo}>\r\n          <h2>YOUR ORDER</h2>\r\n          {cart?.map((ele, index) => {\r\n            console.log(ele);\r\n            return (\r\n              <div key={index} className={classes.orderDetail}>\r\n                <div>\r\n                  <h3>{ele.product.name}</h3>\r\n                </div>\r\n                <div>\r\n                  <span>{ele.quantity}</span>\r\n                  <span> x </span>\r\n                  <span>{editPrice(ele.product.price)} </span>\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n          <div className={classes.total}>\r\n            <h2>Total (VND):</h2>\r\n            <h3>{editPrice(total)} </h3>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <ToastContainer\r\n        position=\"top-center\"\r\n        autoClose={3000}\r\n        hideProgressBar={false}\r\n        newestOnTop={false}\r\n        closeOnClick\r\n        rtl={false}\r\n        pauseOnFocusLoss\r\n        draggable\r\n        pauseOnHover\r\n        theme=\"light\"\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CheckOut;\r\n","import CheckOut from \"../components/checkOutPage/CheckOut\";\r\n\r\nconst CheckoutPage = () => {\r\n  return <CheckOut />;\r\n};\r\n\r\nexport default CheckoutPage;\r\n"],"names":["cartChange","useSelector","state","cart","isUser","currentUser","name","userId","userToken","token","useState","setCart","total","setTotal","fullnameInputRef","useRef","emailInputRef","phoneInputRef","addressInputRef","dispatch","useDispatch","navigate","useNavigate","fetchCartFromBE","fetch","process","credentials","headers","Authorization","res","json","dataCart","tempCart","tempTotal","i","length","productId","cartAndQuantity","cartAndQuantityJson","push","product","quantity","price","console","log","useEffect","submitBillingFormHandler","e","preventDefault","enteredFullnameInputRef","current","value","enteredEmailInputRef","enteredPhoneInputRef","enteredAddressInputRef","method","body","JSON","stringify","email","phoneNumber","address","ok","data","toast","message","Error","setTimeout","cartActions","className","classes","src","img","onSubmit","placeholder","ref","type","map","ele","index","editPrice","position","autoClose","hideProgressBar","newestOnTop","closeOnClick","rtl","pauseOnFocusLoss","draggable","pauseOnHover","theme"],"sourceRoot":""}