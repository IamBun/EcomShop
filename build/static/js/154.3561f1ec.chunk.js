"use strict";(self.webpackChunkmyapp=self.webpackChunkmyapp||[]).push([[154],{4154:function(t,e,n){n.r(e),n.d(e,{default:function(){return A}});var r=n(4165),c=n(5861),s=n(885),a="cart_cart__8pEGC",i="cart_cartBannerImg__vVNcZ",o="cart_bannerDescription__iYktQ",u="cart_shoppingCart__wyLHy",l="cart_title__SH3D6",h="cart_cartDetail__G9NxE",d="cart_cartTotal__1ep73",p="cart_subTotal__omB16",x="cart_total__GGqOx",f="cart_form__IomPE",m=n(3308),j=n(7692),v=n(9434),_=n(5217),g={title:"cartDetail_title__1Xdg4",buttonTransPage:"cartDetail_buttonTransPage__tmGHD",buttonRight:"cartDetail_buttonRight__EVJb-",buttonLeft:"cartDetail_buttonLeft__1B8EG"},y="cartItem_item__Ohu-R",b="cartItem_deleteIcon__dCvY3",k=n(5431),C=n(7689),N=n(2791),T=n(184),I=function(t){var e=(0,N.useState)(t.quantity),n=(0,s.Z)(e,2),a=n[0],i=n[1],o=(0,N.useRef)(),u=((0,C.s0)(),(0,v.I0)()),l=(0,v.v9)((function(t){return t.currentUser.userId})),h=(0,v.v9)((function(t){return t.currentUser.token})),d=function(){var t=(0,c.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://shy-roan-roll.glitch.me"+"/shop/cart/".concat(l),{credentials:"include",method:"DELETE",headers:{Authorization:h,"Content-Type":"application/json"},body:JSON.stringify({productId:e})});case 2:t.sent,u(k.U.change());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),p=function(){var e=(0,c.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://shy-roan-roll.glitch.me"+"/shop/cart/".concat(l),{credentials:"include",method:"PUT",headers:{Authorization:h,"Content-Type":"application/json"},body:JSON.stringify({productId:t.item._id,quantity:n})});case 2:u(k.U.change());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,T.jsxs)("div",{className:y,children:[(0,T.jsx)("img",{src:"https://shy-roan-roll.glitch.me/"+t.item.image[0]}),(0,T.jsx)("h3",{children:t.item.name}),(0,T.jsxs)("h3",{children:[(0,_.lz)(t.item.price)," VND"]}),(0,T.jsx)("form",{children:(0,T.jsx)("input",{ref:o,type:"number",name:"qty",id:"qty",min:"1",max:"10",step:"1",defaultValue:t.quantity,onChange:function(t){p(t.target.value),i(t.target.value)}})}),(0,T.jsxs)("h3",{children:[(0,_.lz)((0,_.Yr)(t.item.price,a).toString())," ","VND"]}),(0,T.jsx)("div",{className:b,onClick:function(){"y"===prompt("Are you sure you want delete this product (y/n) ?").toLowerCase()&&(d(t.item._id),console.log(t.item))},children:(0,T.jsx)(j.SW4,{})})]})},Z=function(){var t=(0,v.I0)(),e=(0,N.useState)([]),n=(0,s.Z)(e,2),a=n[0],i=n[1],o=(0,v.v9)((function(t){return t.currentUser.userId})),u=(0,v.v9)((function(t){return t.currentUser.token})),l=(0,v.v9)((function(t){return t.cart.cartChange})),h=(0,C.s0)(),d=function(){var e=(0,c.Z)((0,r.Z)().mark((function e(){var n,c,s,a,l,h;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://shy-roan-roll.glitch.me"+"/shop/cart/".concat(o),{credentials:"include",headers:{Authorization:u}});case 3:return n=e.sent,e.next=6,n.json();case 6:c=e.sent,t(k.U.changeProductQuantity({totalProduct:c.length})),s=[],a=0;case 10:if(!(a<c.length)){e.next=21;break}return e.next=13,fetch("https://shy-roan-roll.glitch.me"+"/shop/product/".concat(c[a].productId),{credentials:"include"});case 13:return l=e.sent,e.next=16,l.json();case 16:h=e.sent,s.push({product:h.product,quantity:c[a].quantity});case 18:a++,e.next=10;break;case 21:i(s),t(k.U.changeCart(s)),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(0),console.log(e.t0);case 28:case"end":return e.stop()}}),e,null,[[0,25]])})));return function(){return e.apply(this,arguments)}}();(0,N.useEffect)((function(){d()}),[l]);return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)("div",{className:g.title,children:[(0,T.jsx)("h3",{children:"IMAGE"}),(0,T.jsx)("h3",{children:"PRODUCTS"}),(0,T.jsx)("h3",{children:"PRICE"}),(0,T.jsx)("h3",{children:"QUANTITY"}),(0,T.jsx)("h3",{children:"TOTAL"}),(0,T.jsx)("h3",{children:"REMOVE"})]}),a.length>0&&(0,T.jsx)("div",{className:g.detail,children:null===a||void 0===a?void 0:a.map((function(t,e){return(0,T.jsx)(I,{item:t.product,quantity:t.quantity},e)}))}),(0,T.jsxs)("div",{className:g.buttonTransPage,children:[(0,T.jsx)("div",{className:g.buttonLeft,onClick:function(){h("/shop")},children:(0,T.jsxs)("button",{children:[(0,T.jsx)(j.XOO,{}),"Continue Shopping"]})}),(0,T.jsx)("div",{className:g.buttonRight,onClick:function(){h("/checkout")},children:(0,T.jsxs)("button",{children:["Proceed to checkout",(0,T.jsx)(j.Aaf,{})]})})]})]})},E=function(){var t=(0,N.useState)([]),e=(0,s.Z)(t,2),n=(e[0],e[1]),g=(0,N.useState)(0),y=(0,s.Z)(g,2),b=y[0],k=y[1],C=(0,v.v9)((function(t){return t.currentUser.userId})),I=(0,v.v9)((function(t){return t.currentUser.token})),E=(0,v.v9)((function(t){return t.cart.cartChange})),A=function(){var t=(0,c.Z)((0,r.Z)().mark((function t(){var e,c,s,a,i,o,u;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://shy-roan-roll.glitch.me"+"/shop/cart/".concat(C),{credentials:"include",headers:{Authorization:I}});case 3:return e=t.sent,t.next=6,e.json();case 6:c=t.sent,s=[],a=0,i=0;case 10:if(!(i<c.length)){t.next=22;break}return t.next=13,fetch("https://shy-roan-roll.glitch.me"+"/shop/product/".concat(c[i].productId),{credentials:"include",headers:{"Content-type":"application/json"}});case 13:return o=t.sent,t.next=16,o.json();case 16:u=t.sent,s.push({product:u.product,quantity:c[i].quantity}),a+=u.product.price*c[i].quantity;case 19:i++,t.next=10;break;case 22:n(s),k(a),t.next=29;break;case 26:t.prev=26,t.t0=t.catch(0),console.log(t.t0);case 29:case"end":return t.stop()}}),t,null,[[0,26]])})));return function(){return t.apply(this,arguments)}}();(0,N.useEffect)((function(){A()}),[E]);var S=(0,_.lz)(b);return(0,T.jsxs)("div",{className:a,children:[(0,T.jsxs)("div",{className:i,children:[(0,T.jsx)("img",{src:m}),(0,T.jsxs)("div",{className:o,children:[(0,T.jsx)("h1",{children:"Cart Page"}),(0,T.jsx)("h3",{children:"Save up to 50% + Free shipping over $49 "})]})]}),(0,T.jsx)("h2",{children:"Shopping Cart"}),(0,T.jsxs)("div",{className:u,children:[(0,T.jsx)("div",{className:h,children:(0,T.jsx)(Z,{})}),(0,T.jsxs)("div",{className:d,children:[(0,T.jsx)("div",{className:l,children:(0,T.jsx)("h2",{children:"CART TOTAL"})}),(0,T.jsxs)("div",{className:p,children:[(0,T.jsx)("h3",{children:"SUB TOTAL"}),(0,T.jsx)("h3",{children:S})]}),(0,T.jsxs)("div",{className:x,children:[(0,T.jsx)("h3",{children:"TOTAL"}),(0,T.jsx)("h2",{children:S})]}),(0,T.jsxs)("form",{className:f,children:[(0,T.jsx)("input",{placeholder:"Enter your coupon"}),(0,T.jsxs)("button",{onClick:function(t){t.preventDefault()},children:[(0,T.jsx)(j.aHt,{}),"Apply Coupon"]})]})]})]})]})},A=function(){return(0,T.jsx)(E,{})}}}]);
//# sourceMappingURL=154.3561f1ec.chunk.js.map